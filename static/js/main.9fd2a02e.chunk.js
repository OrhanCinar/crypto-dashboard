(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{165:function(e,t,n){},168:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(64),i=n.n(c),r=n(38),l=n(39),s=n(41),u=n(40),d=n(42),m=n(170),p=n(171),b=n(173),f=n(26),h=n(169);var E=function(e){var t=e.coin;return o.a.createElement(h.a,{key:t.id,color:"up"===t.priceChange?"success":"danger",className:"left"},t.id,"/",t.price)},k=n(172),O=Object(f.b)(function(e,t){return{coinList:e.coinReducer.coinList}},null)(function(e){return o.a.createElement(m.a,null,o.a.createElement(p.a,null,o.a.createElement(k.a,null,e.coinList.map(function(e){return o.a.createElement(E,{coin:e,key:e.id})}))))}),g="UPDATE_COIN",v="UPDATE_K_LINE",C=["btcusdt","ethbtc","xlmbtc","adabtc","bnbbtc","tusdbtc","ethtusd"];var D=function(e){return console.log("binance socket ",e),function(e){var t=function(){var e="";for(var t in C)e+="".concat(C[t],"@miniTicker/");return e}();console.log(t);var n=new WebSocket("wss://stream.binance.com:9443/ws/".concat(t));n.onopen=function(){console.log("opening")},n.onclose=function(){console.log("closing")},n.onerror=function(e){console.log("Error : ".concat(e))},n.onmessage=function(t){var n=JSON.parse(t.data);switch(n.e){case"24hrMiniTicker":e(function(e){if(!Array.isArray(e)){var t=e.s,n=e.c,a={type:g,payload:{coin:{id:t,price:n}}};return a}for(var o=0;o<e.length;o++){var c=e[o];if(c&&c.s.includes("BTC")){var i=c.s,r=c.c,l={type:g,payload:{coin:{id:i,price:r}}};return l}}}(n));break;case"kline":e(function(e){var t={closePrice:e.c,openPrice:e.o,symbolName:e.s};return{type:v,payload:{kline:{id:e.s,price:t}}}}(n))}}}},j=(n(81),n(23)),y="".concat("https://api.binance.com").concat("/api/v1/","/");Object(j.timeParse)("%Y-%m-%d");var w=function(e){return function(e){fetch("".concat(y,"/").concat("/klines","?symbol=BTCUSDT&interval=1h&limit=500")).then(function(e){return e.json()}).then(function(t){for(var n=[],a=0;a<t.length;a++){var o=(c=t[a],{openTime:new Date(c[0]),open:c[1],high:c[2],low:c[3],close:c[4],volume:c[5],closeTime:new Date(c[6])});n.push(o)}var c;e({type:"ADD_K_LINE",payload:{candleStickData:n}}),console.log("parsedData",n.length)}).catch(function(e){console.log("getKLine err > ",e)})}},S=n(2),L=n(46),A=n(4),T=n(22),x=n(43),_=n(44),F=n(45),N=n(52),B=n(68),I=n(9),M=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){if(null===this.props.candleStickData||0===this.props.candleStickData.length)return o.a.createElement("div",null,"Loading...");var e=this.props.candleStickData,t=function(e){return e.openTime},n=[t(Object(S.last)(e)),t(e[Math.max(0,e.length-500)])],a=Object(B.ema)().options({windowSize:20,sourcePath:"close"}).skipUndefined(!0).merge(function(e,t){e.ema20=t}).accessor(function(e){return e.ema20}).stroke("blue");return o.a.createElement(L.b,{height:800,ratio:1,width:1600,margin:{left:120,right:10,top:10,bottom:30},type:"hybrid",seriesName:"BTC",data:e,xAccessor:t,xScale:Object(T.scaleTime)(),xExtents:n},o.a.createElement(L.a,{id:1,yExtents:function(e){return[e.high,e.low]},padding:{top:10,bottom:20}},o.a.createElement(x.XAxis,{axisAt:"bottom",orient:"bottom",ticks:6}),o.a.createElement(x.YAxis,{axisAt:"left",orient:"left",ticks:5}),o.a.createElement(F.CandlestickSeries,{width:Object(S.timeIntervalBarWidth)(A.m)}),o.a.createElement(_.MouseCoordinateX,{at:"bottom",orient:"bottom",displayFormat:Object(j.timeFormat)("%Y-%m-%d %H:%M")}),o.a.createElement(_.MouseCoordinateY,{at:"left",orient:"left",displayFormat:Object(I.format)(".4s")}),o.a.createElement(F.LineSeries,{yAccessor:a.accessor(),stroke:a.stroke()}),o.a.createElement(_.CurrentCoordinate,{yAccessor:a.accessor(),fill:a.stroke()}),o.a.createElement(N.OHLCTooltip,{origin:[-40,0]}),o.a.createElement(N.MovingAverageTooltip,{onClick:function(e){return console.log(e)},origin:[-38,15],options:[{yAccessor:a.accessor(),type:"EMA20",stroke:a.stroke(),windowSize:a.options().windowSize,echo:""}]})),o.a.createElement(L.a,{id:2,height:150,yExtents:function(e){return e.volume},origin:function(e,t){return[0,t-150]}},o.a.createElement(x.YAxis,{axisAt:"left",orient:"left",ticks:5,tickFormat:Object(I.format)(".0s")}),">",o.a.createElement(F.BarSeries,{yAccessor:function(e){return e.volume},fill:function(e){return e.close>e.open?"#6BA583":"#FF0000"}})))}}]),t}(o.a.Component),P=Object(f.b)(function(e){return{candleStickData:e.coinReducer.candleStickData}})(M),R=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.onWebSocketStart(),this.props.onKLineAPI()}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,{fluid:!0},o.a.createElement(p.a,null,o.a.createElement(b.a,{xs:"1"},o.a.createElement(O,null)),o.a.createElement(b.a,{xs:"11"},o.a.createElement(P,null))))))}}]),t}(a.Component),U={onWebSocketStart:D,onKLineAPI:w},K=Object(f.b)(function(e,t){return{coinList:e.coinList,lineChartData:e.lineChartData,candleStickData:e.candleStickData}},U)(R),X=n(27),W=n(70),Y=(n(163),n(165),n(71)),H=n(24),z={coinList:[]},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"ADD_K_LINE":return Object(H.a)({},e,{candleStickData:a.candleStickData});case v:var o=e.lineChartData.datasets[0],c=Object(H.a)({},o);c.data.push(parseFloat(a.kline.price));var i=Object(H.a)({},e.lineChartData,{datasets:[c],labels:e.lineChartData.labels.concat(Math.round((new Date).getTime()/1e3))});return Object(H.a)({},e,{lineChartData:Object(H.a)({},e.lineChartData,{newChartData:i})});case g:var r=a.coin,l=r.id,s=r.price;if(e.coinList.length<135&&!e.coinList.find(function(e){return e.id===l}))return Object(H.a)({},e,{coinList:[].concat(Object(Y.a)(e.coinList),[a.coin])});var u=e.coinList.find(function(e){return e.id===l});return Object(H.a)({},e,{coinList:e.coinList.map(function(e){return e.id===l?Object(H.a)({},e,{price:s,priceChange:u.price>s?"down":"up"}):e})});default:return e}},V=Object(X.c)({coinReducer:J}),q=(t.default=V,Object(X.d)(Object(X.a)(W.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),G=Object(X.e)(V,{coinReducer:{coinList:[],lineChartData:{labels:[],datasets:[{type:"line",label:"BTCUSDT",borderColor:"#EC932F",backgroundColor:"#EC932F",pointBorderColor:"#EC932F",pointBackgroundColor:"#EC932F",pointHoverBackgroundColor:"#EC932F",pointHoverBorderColor:"#EC932F",fill:!1,borderWidth:"2",lineTension:.5,showLine:!0,data:[]}]},animation:{duration:0},lineChartOptions:{responsive:!0,maintainAspectRatio:!0,tooltips:{enabled:!0},scales:{xAxes:[{ticks:{autoSkip:!0,maxTicksLimit:10}}]}},candleStickData:[]}},q);i.a.render(o.a.createElement(f.a,{store:G},o.a.createElement(K,null)),document.getElementById("root"))},72:function(e,t,n){e.exports=n(168)},81:function(e,t,n){}},[[72,2,1]]]);
//# sourceMappingURL=main.9fd2a02e.chunk.js.map